<app-nav-bar></app-nav-bar>

<!--[hidden] = "userDefined() === 1" -->
<div class = "container container-fluid" [hidden]="user.password && user.username">
  <br> <h1> User account required </h1>
  Please register here: <button routerLink = "/register" >Register</button>
</div>
<div class="wbdv_profile_page" [hidden]="!user.password">

  <h1>Profile Page</h1>

  <ul class="list-group">
    <li class="list-group-item">
      <p><strong> UserId :</strong>
        {{user._id}}  </p>
    </li>
    <li class="list-group-item">
      <p><strong> Username : </strong>
        {{user.username}} </p>
    </li>
    <li class="list-group-item">
      <p><strong> password: </strong>
        {{user.password}} </p>

    </li>
    <li class="list-group-item">
      <p><strong> User Role: </strong>
        {{user.role}} </p>
    </li>
    <li class="list-group-item">
      <p><strong>First Name :</strong>
        {{user.firstName}}</p>
      <button class="btn btn-danger float-right">
        Hide From Public
      </button>
    </li>
    <li class="list-group-item">
      <p> <strong> Last Name : </strong>
      {{user.lastName}} </p>
      <br>
      <button class="btn btn-danger float-right">
        Hide From Public
      </button>
    </li>
    <li class="list-group-item">
      <p> <strong> Email Address : </strong>
      <span [hidden]="user.editing">
      {{user.email}}
      </span>  </p>
      <br>
      <button class="btn btn-danger float-right">
        Hide From Public
      </button>
      <input [hidden]="!user.editing" [(ngModel)]="user.email"/>
      <button class="btn btn-success" [hidden]="user.editing" (click)="editUser(user)">
        Edit
      </button>
      <button class="btn btn-success" [hidden]="!user.editing" (click)="saveUser(user)">
        Save
      </button>
    </li>
    <li class="list-group-item">
      <a class="nav-link" href="/movielist/{{user._id}}">
        <h5> My MovieList </h5>
      </a>
    </li>
  </ul>

<!--  testing hidden users table dependent on role-->
<!--  <div> Is the user an admin?:-->
<!--    <button [hidden]="user.role === 'Admin'">-->
<!--      No user is Anonymous-->
<!--    </button>-->
<!--    <button [hidden]="user.role !== 'Admin'">-->
<!--      Yes user is an admin-->
<!--    </button>-->
<!--  </div>-->


  <br>
<!--  Hide Users table of user role is not Admin -->
  <div class="table-responsive">
    <h2 id="user-admin-header" >User Administrator View</h2>
    <i class="fa fas-user"></i>
  <table class="table table-bordered" [hidden]="user.role !== 'Admin'">

    <thead>
    <tr>
      <th>Username</th>
      <th>Password</th>
      <th>Email</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Role</th>
    </tr>
    </thead>

    <tbody *ngFor="let user of users">
    <td>
      {{user.username}}
    </td>

    <td>
      {{user.password}}
    </td>
    <td>
      {{user.email}}
    </td>

    <td>
      {{user.firstName}}
    </td>
    <td>
      {{user.lastName}}
    </td>
    <td>
      {{user.role}}
    </td>

    </tbody>
    <!--    <span [hidden]="course.editing">{{course.title}}</span>-->

    <!--    maybe use if user.role === '', its an anonymous view-->
  </table>
</div>


  <button class="btn btn-danger btn-block wbdv_profile_logoutBtn" (click)="logout()">
    Logout
  </button>


</div>
